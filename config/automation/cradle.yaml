- alias: "Cradle effect speed"
  initial_state: True
  hide_entity: True
  trigger:
    - platform: state
      entity_id: input_number.cradle_strip_speed
  action:
    - service: mqtt.publish
      data_template:
        topic: "cradle/led/set"
        payload: '{"transition":{{ trigger.to_state.state | int }}}'
         
- alias: "Cradle Auto On"
  initial_state: True
  hide_entity: False
  trigger:
    - platform: state
      entity_id: sensor.cradle_pir
      to: 'Motion'
  action:
    - service: mqtt.publish
      data_template:
         topic: "cradle/led/set"
         payload: '{"state":"ON","color":{"r":255,"g":255,"b":255},"brightness":{{ states.input_number.cradle_brightness_slider.state | int }},"effect":"solid"}'
    - service: timer.start
      data_template:
        entity_id: timer.cradle_timer
        duration: '00:00:{{ states.input_number.cradle_timer_slider.state | int }}'
          
- alias: "Cradle Auto Off"
  initial_state: True
  hide_entity: False
  trigger:
    platform: event
    event_type: timer.finished
    event_data:
      entity_id: timer.cradle_timer
  action:
    - service: mqtt.publish
      data_template:
        topic: "cradle/led/set"
        payload: '{"state":"OFF","color":{"r":255,"g":255,"b":255},"brightness":{{ states.input_number.cradle_brightness_slider.state | int }},"effect":"solid"}'
